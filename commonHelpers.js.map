{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nfunction showNotificationError(message) {\n    iziToast.error({\n    message: message,\n    position: 'topRight',\n    timeout: 2000,\n    close: false,\n    overlay: false,\n    displayMode: 'once',\n    color: '#EF4040',\n    messageColor: '#FFFFFF',\n    messageSize: '16px',\n    iconColor: '#FFFFFF',\n    theme: 'dark',\n    messageLineHeight: '24px',\n    });\n}\n\nconst API_KEY = '38212376-ffcb529addc704f756c0c7d48';\nconst BASE_URL = `https://pixabay.com/api/?key=${API_KEY}&image_type=photo&orientation=horizontal&safesearch=true`;\naxios.defaults.baseURL = BASE_URL;\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nconst perPage = 40;\nlet page = 1;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionPosition: 'bottom',\n    captionClass: 'caption-style',\n    close: true,\n    closeText: 'Ã—',\n    fadeSpeed: 250,\n    animationSpeed: 250,\n},);\n\n\nform.addEventListener('submit', onSearch);\n\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) { \n    e.preventDefault();\n    gallery.innerHTML = '';\n    loader.classList.add('loader-show');\n    page = 1;\n    const searchQuery = input.value;\n    searchImages(searchQuery);\n}\n\nfunction onLoadMore() {\n    loadMoreBtn.classList.remove('load-more-btn-show');\n    loader.classList.add('loader-show');\n    const searchQuery = input.value;\n    searchMoreImages(searchQuery);\n}\n\nasync function searchMoreImages(searchQuery) { \n        const url = `&q=${searchQuery}&per_page=${perPage}&page=${page}`;\n        return await axios.get(url)\n            .then(response => {\n                const totalHits = response.data.totalHits;\n                const totalPage = Math.ceil(totalHits / perPage);\n                if (page > totalPage) {\n                    showNotificationError(\"We're sorry, but you've reached the end of search results.\");\n                    loader.classList.remove('loader-show');\n                    lightbox.refresh();\n                } else {\n                    page = page + 1;\n                    const markup = createGalleryMarkup(response.data.hits);\n                    gallery.insertAdjacentHTML('beforeend', markup);\n                    loader.classList.remove('loader-show');\n                    loadMoreBtn.classList.add('load-more-btn-show');\n                    const photoCard = document.querySelector('.photo-card');\n                    const photoCardHeight = photoCard.getBoundingClientRect().height;\n                    window.scrollBy({\n                        top: photoCardHeight * 2,\n                        behavior: 'smooth',\n                    });\n                    lightbox.refresh();\n                }\n\n            })\n            .catch(error => console.log(error));\n}\n\nasync function searchImages(searchQuery) { \n    \n    const url = `&q=${searchQuery}&per_page=${perPage}&page=${page}`;\n    \n    return await axios.get(url)\n        .then(response => {\n            if (response.data.hits.length === 0) {\n                showNotificationError('Sorry, there are no images matching your search query. Please try again!');\n                loader.classList.remove('loader-show');\n            } else {\n                page = page + 1;\n                const markup = createGalleryMarkup(response.data.hits);\n                gallery.insertAdjacentHTML('beforeend', markup);\n                loader.classList.remove('loader-show');\n                loadMoreBtn.classList.add('load-more-btn-show');\n                lightbox.refresh();\n            }\n        })\n        .catch(error => console.log(error));\n}\n\nfunction createGalleryMarkup(images) { \n    return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads, user }) => {\n        return `\n        <li class=\"photo-card\">\n            <a href=\"${largeImageURL}\" class=\"gallery__item\">\n                <img src=\"${webformatURL}\" alt=\"Author: ${user}, tags: ${tags}\" class=\"gallery__image\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\">\n                    <b>Likes</b>\n                    <span>${likes}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Views</b>\n                    <span>${views}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Comments</b>\n                    <span>${comments}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Downloads</b>\n                    <span>${downloads}</span>\n                </p>\n            </div>\n        </li>\n        `;\n    }).join('');\n}"],"names":["showNotificationError","message","iziToast","API_KEY","BASE_URL","axios","form","input","gallery","loader","loadMoreBtn","perPage","page","lightbox","SimpleLightbox","onSearch","onLoadMore","e","searchQuery","searchImages","searchMoreImages","url","response","totalHits","totalPage","markup","createGalleryMarkup","photoCardHeight","error","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","user"],"mappings":"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"}